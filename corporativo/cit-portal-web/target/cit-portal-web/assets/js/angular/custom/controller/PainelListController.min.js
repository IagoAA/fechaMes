citApp.controller("PainelListController",["$scope","PainelRepository","$translate","$timeout",function(a,c,d,e){a.$showAdvancedFilters=!1;a.totalPages=10;a.totalItens=0;a.limit=10;a.filterCriteria={start:1,dir:"asc",sort:"nome",limit:10,fields:["id","nome","usuario.username"],filters:[{type:"string",field:"nome"},{type:"string",field:"usuario.username"},{type:"numeric",field:"organizacao.id",value:a.usuarioLogado.organizacao.id}]};a.filterResult=function(b){e(function(){void 0==b&&(a.filterCriteria.keywordValue=
null);a.filterCriteria.start=1;a.fetchResult().then(function(){a.filterCriteria.start=1})})};a.fetchResult=function(){a.setLoadingPesquisa(!0);return c.getListPage(a.filterCriteria).then(function(b){a.paineis=b.originalElement.objects;a.totalPages=b.originalElement.totalPages;a.totalItens=b.originalElement.totalItens;a.setLoading(!1)},function(){a.paineis=[];a.totalPages=0;a.totalItens=0})};a.checkPainel=function(b){a.removeCheckedPainel();b.$checked=!0};a.removeCheckedPainel=function(){a.paineis.forEach(function(a){a.$checked=
!1})};a.abirDialogConfirmacaoRemocao=function(){var b=a.getPainelChecked();null===b?a.showAlert("warning",d.instant("MSG.SELECIONE_UM_ITEM_PARA_SER_REMOVIDO")):(a.$openModalConfirm({message:d.instant("LABEL.CONFIRMA_EXCLUSAO"),callback:a.remover}),a.painelRemocao=b)};a.getPainelChecked=function(){var b=null;a.paineis.forEach(function(a){a.$checked&&(b=a)});return b};a.remover=function(){a.setLoadingRemove(!0);c.remove(a.painelRemocao).then(function(b){a.setLoadingRemove(!1);a.showAlert("success",
d.instant("MSG.MG001"));a.fetchResult()});a.$modalConfirmInstance.dismiss("cancel")};a.abrirPainel=function(b){var c=a.getPainelChecked();null===c?a.showAlert("warning",b?d.instant("MSG.SELECIONE_UM_ITEM_PARA_VISUALIZACAO"):d.instant("MSG.SELECIONE_UM_ITEM_PARA_EDICAO")):(angular.element("#painelEdit").scope().getPainel(c.id,b),a.$showPageEditWorkspace(a.workspace))};a.fetchResult()}]);