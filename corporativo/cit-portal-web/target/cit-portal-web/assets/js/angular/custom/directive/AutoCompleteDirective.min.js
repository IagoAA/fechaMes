citApp.directive("autoComplete",["$translate","$timeout",function(e,c){return{require:["^ngModel"],scope:{label:"@ngLabel",obrigatorio:"@ngObrigatorio",disabled:"\x3dngDisabled",minLength:"\x3dngMinLength",model:"\x3dngModel",form:"\x3dform",item:"@ngItem",find:"\x26ngFind",setResult:"\x26ngSetResult",acaoBorracha:"\x26ngAcaoBorracha",labelAlertTooltip:"@",labelInfoTooltip:"@",labelQuestionTooltip:"@",buttonNewAction:"\x26",buttonNewShow:"@",buttonNewTooltip:"@"},replace:!0,restrict:"E",templateUrl:"assets/js/angular/custom/directive/html/auto-complete.html",
controller:["$scope","$element","$attrs",function(a,c,d){void 0===a.id&&(a.id=d.ngModel);a.chave=a.item.replace("item['","").replace("']","");a.modelOld=angular.copy(a.model);a.defineObrigatoriedade=function(){a.model&&a.model.id&&(a.isObrigatorio=(a.form[a.id].$error.required||!a.model.id)&&(!a.form[a.id].$pristine||a.form.$submitted)&&a.obrigatorio)};a.labelRender=!0;void 0===a.label&&(a.labelRender=!1);a.labelAlertTooltipCopy=a.labelAlertTooltip;void 0!==a.labelAlertTooltip||!0!==a.obrigatorio&&
"true"!==a.obrigatorio||(a.labelAlertTooltipCopy=e.instant(a.label)+" "+e.instant("LABEL.CAMPO_OBRIGATORIO"));a.labelInfoTooltipRender=!0;void 0===a.labelInfoTooltip&&(a.labelInfoTooltipRender=!1);a.labelQuestionTooltipRender=!0;void 0===a.labelQuestionTooltip&&(a.labelQuestionTooltipRender=!1)}],link:function(a,e,d,f){a.findResult=function(b){if(a.model&&!a.modelOld&&null!==a.modelOld&&void 0!==a.modelOld||a.model&&a.model.id&&!a.modelOld)a.modelOld=angular.copy(a.model);if(a.model&&a.model[a.chave]==
b)c(function(){a.model=angular.copy(a.modelOld);a.setResult({item:a.model});return[]});else if(a.model&&a.model.id)c(function(){a.model=angular.copy(a.modelOld);a.setResult({item:a.model});return[]});else return a.find({value:b})};a.setResultItem=function(b){a.setResult({item:b})};a.limparCampo=function(){a.model=null};a.limparCampoSemModel=function(){a.model&&a.model.id||a.limparCampo()};a.removeModel=function(b){(8===b.keyCode||46===b.keyCode)&&a.model&&a.model.id&&(a.model=null);13===b.keyCode&&
d.ngAcaoEnter&&a.model&&a.model.id&&c(function(){a.$eval(d.ngAcaoEnter);a.limparCampo()})}}}}]);