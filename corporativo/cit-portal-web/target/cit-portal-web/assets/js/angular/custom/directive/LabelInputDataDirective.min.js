citApp.directive("labelInputData",["$translate","$filter",function(e,f){return{require:["^ngModel"],scope:{id:"@ngId",label:"@ngLabel",minDate:"\x3dngMinDate",maxDate:"\x3dngMaxDate",obrigatorio:"\x3dngObrigatorio",disabled:"\x3dngDisabled",model:"\x3dngModel",eventoChange:"\x26ngEventoChange",format:"@ngFormat",form:"\x3dform",labelAlertTooltip:"@",labelInfoTooltip:"@",labelQuestionTooltip:"@",mode:"@ngMode"},replace:!0,restrict:"E",templateUrl:"assets/js/angular/custom/directive/html/labelInputDate.html",
controller:["$scope","$element","$attrs",function(a,f,g){void 0===a.id&&(a.id=g.ngModel);a.mode||(a.mode="day");a.$datePickerFormat=a.format?a.format:"dd/MM/yyyy";a.$mask=a.$datePickerFormat.replace("dd","99").replace("MM","99").replace("yyyy","9999");a.$datePickerOpened=[];a.$datePickerOptions={"datepicker-mode":"'"+a.mode+"'","min-mode":a.mode,formatYear:"yyyy",startingDay:1};a.labelRender=!0;void 0===a.label&&(a.labelRender=!1);a.labelAlertTooltipCopy=a.labelAlertTooltip;void 0===a.labelAlertTooltip&&
!0===a.obrigatorio&&(a.labelAlertTooltipCopy=e.instant(a.label)+" "+e.instant("LABEL.CAMPO_OBRIGATORIO"));a.labelInfoTooltipRender=!0;void 0===a.labelInfoTooltip&&(a.labelInfoTooltipRender=!1);a.labelQuestionTooltipRender=!0;void 0===a.labelQuestionTooltip&&(a.labelQuestionTooltipRender=!1)}],link:function(a,k,g,l){a.dataInvalida=!1;var h=function(b){if(b&&""!==b){var c=null;(c=7<b.length?validaData(b):validaDataMesAno(b))?(a.dataInvalida=!1,"dd/MM/yyyy"===a.$datePickerFormat?("[object Date]"!==Object.prototype.toString.call(b)&&
(b=converterStringEmDate(b)),a.model=f("date")(b,a.$datePickerFormat),a.form&&(a.form[a.id].$modelValue=a.model,a.form[a.id].$setViewValue(a.model),a.form[a.id].$render())):"MM/yyyy"===a.$datePickerFormat&&validaDataMesAno(b)?(a.model=f("date")(b,a.$datePickerFormat),a.form&&(a.form[a.id].$modelValue=a.model,a.form[a.id].$setViewValue(a.model),a.form[a.id].$render())):a.form&&(a.form[a.id].$modelValue="",a.form[a.id].$setViewValue(""),a.form[a.id].$render())):(a.eventoChange(),a.dataInvalida=!0,angular.element("#citapp-controller").scope().showAlert("warning",
e.instant("VALIDACAO.DATA_INVALIDA")))}};a.$limparModel=function(){a.disabled||(a.model="",a.eventoChange(),a.dataInvalida=!1)};a.formataDataAoDesfocar=function(a){h(a.currentTarget.value)};a.formataDataAoSelecionar=function(b){b&&h(a.$$childHead.date)};a.formataDataAoDigitar=function(b){var c=b.currentTarget.value,d=b.keyCode?b.keyCode:b.which;96<=d&&105>=d||48<=d&&57>=d?(b.currentTarget.value=c.replace(/[^0-9\/\-]/ig,""),b.currentTarget.value.length>a.$datePickerFormat.length?b.currentTarget.value=
c.substring(0,c.length-1):("MM/yyyy"===a.$datePickerFormat?2===c.length&&(c=c.replace(/([0-9]{2})/,"$1/")):(2===c.length&&(c=c.replace(/([0-9]{2})/,"$1/")),5===c.length&&(c=c.replace(/([0-9\/\-]{5})/,"$1/"))),b.currentTarget.value=c)):b.currentTarget.value=111===d&&"keydown"===b.type?c.substring(0,c.length-1):c.replace(/[^0-9\/\-]/ig,"")};a.$datePickerOpen=function(b){a.disabled||(b.preventDefault(),b.stopPropagation(),a.$opened=!0)}}}}]);