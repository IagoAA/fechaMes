citApp.controller("OrganizacaoController",["$scope","OrganizacaoRepository","$translate","$timeout","$filter",function(a,e,c,f,d){a.organizacao={};a.isBloquear=!1;a.isDesbloquear=!1;a.resetForm=function(){a.limparOrganizacao();a.edit=!0;a.pgEdit=!0;a.isBloquear=!1;a.isDesbloquear=a.isBloquear;f(function(){a.organizacaoForm.$submitted=!1;a.organizacaoForm.$setPristine()})};a.atualizaPaginaPesquisa=function(){angular.element("#searchOrganizacao").scope().fetchResult()};a.saveOrUpdate=function(){a.organizacaoForm.$submitted=
!0;if(a.organizacaoForm.$valid){a.setLoadingSalva(!0);var b=converterStringEmDate(a.organizacao.dataReferenciaVigente);a.organizacao.dataReferenciaVigente=d("date")(b,"dd/MM/yyyy");e.save(a.organizacao).then(function(b){a.organizacao=b.originalElement;b=converterStringEmDate(a.organizacao.dataReferenciaVigente);a.organizacao.dataReferenciaVigente=d("date")(b,"MM/yyyy");a.isBloquear=!0;a.isDesbloquear=!a.isBloquear;a.showAlert("success",c.instant("MSG.SUCESSO_ORGANIZACAO"));a.organizacaoForm.$submitted=
!1});a.setLoading(!1)}else a.showAlert("error",c.instant("VALIDACAO.ALERTA_OBRIGATORIOS")," ",!1)};a.limparOrganizacao=function(){a.organizacao={}};void 0==a.$parent||a.$parent.newObejct&&0==a.$parent.idObejct||(a.setLoadingGet(!0),e.get(a.$parent.idObejct).then(function(b){a.organizacao=b.originalElement;b=converterStringEmDate(a.organizacao.dataReferenciaVigente);a.organizacao.dataReferenciaVigente=d("date")(b,"MM/yyyy");a.setLoading(!1)}));a.getOrganizacao=function(b,c){a.setLoadingGet(!0);e.get(b.id).then(function(b){a.organizacao=
b.originalElement;b=converterStringEmDate(a.organizacao.dataReferenciaVigente);a.organizacao.dataReferenciaVigente=d("date")(b,"MM/yyyy");null===a.organizacao.dataBloqueio||void 0===a.organizacao.dataBloqueio?(a.isBloquear=!0,a.isDesbloquear=!a.isBloquear,a.edit=c):(a.isBloquear=!1,a.isDesbloquear=!a.isBloquear,a.edit=!1);a.pgEdit=c;a.setLoading(!1)})}}]);