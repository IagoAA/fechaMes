citApp.controller("CaixaController",["$scope","CaixaRepository","LuckRepository","$translate","$timeout",function(a,d,e,c,f){a.caixa={listaEstado:[]};a.isBloquear=!1;a.isDesbloquear=!1;a.resetForm=function(){a.limparCaixa();a.edit=!0;a.pgEdit=!0;a.isBloquear=!1;a.isDesbloquear=a.isBloquear;f(function(){a.caixaForm.$submitted=!1;a.caixaForm.$setPristine()})};a.atualizaPaginaPesquisa=function(){angular.element("#searchCaixa").scope().fetchResult()};a.confirmarBloqueioCaixa=function(){a.caixa.dataBloqueio&&
""!==a.caixa.dataBloqueio?d.save(a.caixa).then(function(b){a.caixa=b.originalElement;a.isBloquear=!1;a.isDesbloquear=!a.isBloquear;a.edit=!1;a.showAlert("success",c.instant("MSG.SUCESSO_BLOQUEIO"))}):a.showAlert("error",c.instant("MSG.MG011")," ",!1)};a.desbloquear=function(){a.setLoadingSalva(!0);a.caixa.dataBloqueio=null;d.save(a.caixa).then(function(b){a.setLoadingSalva(!1);a.caixa=b.originalElement;a.edit=!0;a.isBloquear=!0;a.isDesbloquear=!a.isBloquear;a.showAlert("success",c.instant("MSG.SUCESSO_DESBLOQUEIO"))})};
a.remove=function(b){a.caixa=b;a.$openModalConfirm({message:c.instant("MSG.CONFIRMA_EXCLUIR_REGIAO"),callback:function(){d.remove(a.caixa).then(function(){a.$modalConfirmInstance.dismiss("cancel");a.showAlert("success",c.instant("MSG.SUCESSO_REGIAO_EXCLUIDO"));angular.element("#searchCaixa").scope().fetchResult();a.resetForm()})}})};a.saveOrUpdate=function(){a.caixaForm.$submitted=!0;a.caixaForm.$valid?(a.setLoadingSalva(!0),d.save(a.caixa).then(function(b){a.caixa=b.originalElement;a.isBloquear=
!0;a.isDesbloquear=!a.isBloquear;a.showAlert("success",c.instant("MSG.SUCESSO_REGIAO"));a.caixaForm.$submitted=!1;a.setLoading(!1)})):a.showAlert("error",c.instant("VALIDACAO.ALERTA_OBRIGATORIOS")," ",!1)};a.limparCaixa=function(){a.caixa={listaEstado:[]}};void 0==a.$parent||a.$parent.newObejct&&0==a.$parent.idObejct||(a.setLoadingGet(!0),d.get(a.$parent.idObejct).then(function(b){a.caixa=b.originalElement;a.setLoading(!1)}));a.getCaixa=function(b,c){a.setLoadingGet(!0);d.get(b.id).then(function(b){a.caixa=
b.originalElement;void 0===a.caixa.listaEstado&&(a.caixa.listaEstado=[]);null===a.caixa.dataBloqueio||void 0===a.caixa.dataBloqueio?(a.isBloquear=!0,a.isDesbloquear=!a.isBloquear,a.edit=c):(a.isBloquear=!1,a.isDesbloquear=!a.isBloquear,a.edit=!1);a.pgEdit=c;a.setLoading(!1)})};a.findLuck=function(a){return e.listarLuck(a).then(function(a){return a})};a.limparAutoCompleteLuck=function(){a.caixa.luck=null}}]);