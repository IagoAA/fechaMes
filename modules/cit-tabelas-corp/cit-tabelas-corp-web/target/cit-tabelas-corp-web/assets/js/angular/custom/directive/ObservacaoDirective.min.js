citApp.directive("componenteObservacao",["$filter","ObservacaoRepository","$translate",function(b,e,c){return{scope:{observacoes:"\x3dngObservacoes",hide:"\x3dngHide",form:"\x3dform",disabled:"\x3dngDisabled",edit:"\x3dngEdit"},replace:!0,restrict:"E",templateUrl:"/cit-tabelas-corp-web/assets/js/angular/custom/directive/html/observacao.html",link:function(a,f,g){a.observacao={autor:{}};a.usuarioLogado=angular.element("#citapp-controller").scope().usuarioLogado;a.autor=a.usuarioLogado;a.dataAtual=
b("date")(new Date,"dd/MM/yyyy");a.adicionarObservacao=function(){void 0===a.observacoes&&(a.observacoes=[]);void 0===a.observacao.descricao||""===a.observacao.descricao?angular.element("#citapp-controller").scope().showAlert("error",c.instant("VALIDACAO.PREENCHA_CAMPO_OBSERVACAO")):(a.observacao.dataCriacao=new Date,a.observacao.autor.id=a.usuarioLogado.id,a.observacao.autor.username=a.usuarioLogado.username,a.observacoes.push(a.observacao),a.observacao={autor:{}})};a.remove=function(d,b){angular.element("#citapp-controller").scope().$openModalConfirm({message:c.instant("MSG.CONFIRMA_EXCLUSAO"),
callback:function(){void 0!==d.id&&e.remove(d);a.observacoes.splice(b,1);angular.element("#citapp-controller").scope().showAlert("success",c.instant("MSG.REGISTRO_EXCLUIDO"));angular.element("#citapp-controller").scope().$modalConfirmInstance.dismiss("cancel")}})}}}}]);