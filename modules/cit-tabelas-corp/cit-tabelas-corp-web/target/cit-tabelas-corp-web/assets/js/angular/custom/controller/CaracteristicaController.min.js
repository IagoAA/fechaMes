citApp.controller("CaracteristicaController",["$scope","CaracteristicaRepository","DominioRepository","$translate","$timeout","$filter",function(a,d,e,c,f,g){a.caracteristica={};a.tiposRestricao={};a.tiposDado={};a.chavesDominio=[];a.isBloquear=!1;a.isDesbloquear=!1;a.resetForm=function(){a.limparCaracteristica();a.edit=!0;a.pgEdit=!0;a.isBloquear=!1;a.isDesbloquear=a.isBloquear;f(function(){a.caracteristicaForm.$submitted=!1;a.caracteristicaForm.$setPristine()})};a.atualizaPaginaPesquisa=function(){angular.element("#searchCaracteristica").scope().fetchResult()};
a.limpaCamposDependentes=function(){null!==a.caracteristica.tamanho&&void 0!==a.caracteristica.tamanho&&(a.caracteristica.tamanho=null);null!==a.caracteristica.chaveDominio&&void 0!==a.caracteristica.chaveDominio&&(a.caracteristica.chaveDominio=null);null!==a.caracteristica.expressaoRegular&&void 0!==a.caracteristica.expressaoRegular&&(a.caracteristica.expressaoRegular=null)};a.confirmarBloqueioCaracteristica=function(){a.caracteristica.dataBloqueio?(a.setLoadingSalva(!0),d.save(a.caracteristica).then(function(b){a.setLoadingSalva(!1);
a.caracteristica=b.originalElement;a.isBloquear=!1;a.isDesbloquear=!a.isBloquear;a.edit=!1;a.showAlert("success",c.instant("MSG.SUCESSO_BLOQUEIO_CARACTERISTICA"))})):a.showAlert("error",c.instant("MSG.MG011"))};a.desbloquear=function(){a.setLoadingSalva(!0);a.caracteristica.dataBloqueio=null;d.save(a.caracteristica).then(function(b){a.setLoadingSalva(!1);a.caracteristica=b.originalElement;a.edit=!0;a.isBloquear=!0;a.isDesbloquear=!a.isBloquear;a.showAlert("success",c.instant("MSG.SUCESSO_DESBLOQUEIO_CARACTERISTICA"))})};
e.findAllDominio("tipoRestricao").then(function(b){a.dominiosTipoRestricao=b});e.findAllDominio("tipoDado").then(function(b){a.dominiosTipoDado=g("tipoDadoCaracteristica")(b)});e.findAllChavesDominio().then(function(b){a.chavesDominio=b});a.remove=function(b){a.$openModalConfirm({message:c.instant("MSG.CONFIRMA_EXCLUIR_CARACTERISTICA"),callback:function(){d.remove(b).then(function(){a.caracteristica={};a.$modalConfirmInstance.dismiss("cancel");a.showAlert("success",c.instant("MSG.SUCESSO_CARACTERISTICA_EXCLUIDO"));
angular.element("#searchCaracteristica").scope().fetchResult();a.resetForm()})}})};a.saveOrUpdate=function(){a.caracteristicaForm.$submitted=!0;a.caracteristicaForm.$valid?(a.setLoadingSalva(!0),d.save(a.caracteristica).then(function(b){a.caracteristica=b.originalElement;a.isBloquear=!0;a.isDesbloquear=!a.isBloquear;a.showAlert("success",c.instant("MSG.SUCESSO_CARACTERISTICA"));a.caracteristicaForm.$submitted=!1}),a.setLoading(!1)):a.showAlert("error",c.instant("VALIDACAO.ALERTA_OBRIGATORIOS")," ",
!1)};a.limparCaracteristica=function(){a.caracteristica={}};void 0==a.$parent||a.$parent.newObejct&&0==a.$parent.idObejct||(a.setLoadingGet(!0),d.get(a.$parent.idObejct).then(function(b){a.caracteristica=b.originalElement;a.setLoading(!1)}));a.getCaracteristica=function(b,c){a.setLoadingGet(!0);d.get(b.id).then(function(b){a.caracteristica=b.originalElement;null===a.caracteristica.dataBloqueio||void 0===a.caracteristica.dataBloqueio?(a.isBloquear=!0,a.isDesbloquear=!a.isBloquear,a.edit=c):(a.isBloquear=
!1,a.isDesbloquear=!a.isBloquear,a.edit=!1);a.pgEdit=c;a.setLoading(!1)})}}]);