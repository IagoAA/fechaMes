citApp.controller("LocalizacaoController",["$scope","LocalizacaoRepository","$translate","$timeout",function(a,d,c,e){a.localizacao={endereco:{}};a.isBloquear=!1;a.isDesbloquear=!1;a.resetForm=function(){a.limparLocalizacao();a.edit=!0;a.pgEdit=!0;a.isBloquear=!1;a.isDesbloquear=a.isBloquear;e(function(){a.localizacaoForm.$submitted=!1;a.localizacaoForm.$setPristine()})};a.atualizaPaginaPesquisa=function(){angular.element("#searchLocalizacao").scope().fetchResult()};a.desbloquear=function(){a.setLoadingSalva(!0);
a.localizacao.dataBloqueio=null;d.save(a.localizacao).then(function(b){a.setLoadingSalva(!1);a.localizacao=b.originalElement;a.carregarPaisRegiaoEstadoCidadeDoEndereco();a.isBloquear=!0;a.isDesbloquear=!a.isBloquear;a.edit=!0;a.showAlert("success",c.instant("MSG.SUCESSO_DESBLOQUEIO"))})};a.remove=function(b){a.$openModalConfirm({message:c.instant("MSG.CONFIRMA_EXCLUIR_LOCALIZACAO"),callback:function(){d.remove(b).then(function(){a.localizacao={};a.$modalConfirmInstance.dismiss("cancel");a.showAlert("success",
c.instant("MSG.SUCESSO_LOCALIZACAO_EXCLUIDO"));angular.element("#searchLocalizacao").scope().fetchResult();a.resetForm()})}})};a.saveOrUpdate=function(){a.localizacaoForm.$submitted=!0;a.localizacaoForm.$valid?(a.setLoadingSalva(!0),d.save(a.localizacao).then(function(b){a.localizacao=b.originalElement;a.carregarPaisRegiaoEstadoCidadeDoEndereco();a.isBloquear=!0;a.isDesbloquear=!a.isBloquear;a.showAlert("success",c.instant("MSG.SUCESSO_LOCALIZACAO"));a.localizacaoForm.$submitted=!0;a.setLoading(!1)})):
a.showAlert("error",c.instant("VALIDACAO.ALERTA_OBRIGATORIOS")," ",!1)};a.limparLocalizacao=function(){a.localizacao={endereco:{}}};void 0==a.$parent||a.$parent.newObejct&&0==a.$parent.idObejct?a.organizacao=a.usuarioLogado.organizacao:(a.setLoadingGet(!0),d.get(a.$parent.idObejct).then(function(b){a.localizacao=b.originalElement;a.setLoading(!1)}));a.carregarPaisRegiaoEstadoCidadeDoEndereco=function(){a.localizacao.endereco.$pais=a.localizacao.endereco.bairro.cidade.estado.regiao.pais;a.localizacao.endereco.$regiao=
a.localizacao.endereco.bairro.cidade.estado.regiao;a.localizacao.endereco.$estado=a.localizacao.endereco.bairro.cidade.estado;a.localizacao.endereco.$cidade=a.localizacao.endereco.bairro.cidade};a.getLocalizacao=function(b,c){a.setLoadingGet(!0);d.get(b.id).then(function(b){a.localizacao=b.originalElement;a.carregarPaisRegiaoEstadoCidadeDoEndereco();a.organizacao=a.usuarioLogado.organizacao;null===a.localizacao.dataBloqueio||void 0===a.localizacao.dataBloqueio?(a.isBloquear=!0,a.isDesbloquear=!a.isBloquear,
a.edit=c):(a.isBloquear=!1,a.isDesbloquear=!a.isBloquear,a.edit=!1);a.pgEdit=c;a.setLoading(!1)})}}]);